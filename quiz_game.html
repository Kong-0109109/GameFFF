
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æ™‚ç©ºæ¢å“¡ï¼šç¶­åº¦ä¿®å¾©æ¸¬è©¦</title>
    <style>
        :root { --neon-blue: #00f3ff; --dark-bg: #0a0b1e; }
        body { background: var(--dark-bg); color: white; font-family: "Microsoft JhengHei", sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        #game-container { width: 90%; max-width: 600px; background: rgba(255, 255, 255, 0.05); padding: 30px; border-radius: 15px; border: 1px solid var(--neon-blue); box-shadow: 0 0 20px rgba(0, 243, 255, 0.2); text-align: center; }
        .hidden { display: none; }
        .btn { background: transparent; border: 1px solid var(--neon-blue); color: var(--neon-blue); padding: 12px 24px; font-size: 18px; cursor: pointer; transition: 0.3s; margin: 10px; border-radius: 5px; width: 80%; }
        .btn:hover { background: var(--neon-blue); color: black; box-shadow: 0 0 15px var(--neon-blue); }
        #timer { font-size: 24px; color: #ff4757; margin-bottom: 20px; }
        .rank-list { text-align: left; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; }
        .question-text { font-size: 22px; margin-bottom: 25px; line-height: 1.5; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="start-screen">
        <h1>ğŸŒŒ æ™‚ç©ºæ¢å“¡æ¸¬è©¦</h1>
        <p>ç¶­åº¦å´©å£ä¸­... è«‹åœ¨æ™‚é™å…§ä¿®æ­£é‚è¼¯éŒ¯èª¤ã€‚</p>
        <input type="text" id="player-name" placeholder="è¼¸å…¥æ¢å“¡ä»£è™Ÿ" style="padding: 10px; width: 70%; margin-bottom: 20px;">
        <br>
        <button class="btn" onclick="startGame()">é–‹å§‹ä»»å‹™</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div id="timer">å‰©é¤˜æ™‚é–“ï¼š<span id="time-left">15</span>s</div>
        <div id="question-area" class="question-text"></div>
        <div id="options-area"></div>
    </div>

    <div id="result-screen" class="hidden">
        <h2>ä»»å‹™å®Œæˆï¼</h2>
        <p id="final-score" style="font-size: 28px; color: var(--neon-blue);"></p>
        <div class="rank-list">
            <h3>ğŸ† é ‚å°–æ¢å“¡æ’è¡Œ</h3>
            <ol id="leaderboard"></ol>
        </div>
        <button class="btn" onclick="location.reload()">é‡æ–°æŒ‘æˆ°</button>
    </div>
</div>

<script>
    const questions = [
        { q: "ã€æ•¸å­¸ã€‘ç­‰å·®æ•¸åˆ—å‰ä¸‰é … x+1, 2x, 4x-5ï¼Œå‰‡ x = ?", options: ["3", "4", "5", "6"], ans: 1 },
        { q: "ã€æ•¸å­¸ã€‘log10(2) â‰ˆ 0.3010ï¼Œ2^20 æ˜¯å¹¾ä½æ•¸ï¼Ÿ", options: ["6", "7", "20", "8"], ans: 1 },
        { q: "ã€æ•¸å­¸ã€‘ç›´è§’ä¸‰è§’å½¢å…©è‚¡ âˆš7 èˆ‡ âˆš2ï¼Œæ–œé‚Šç‚ºï¼Ÿ", options: ["3", "9", "âˆš5", "5"], ans: 0 },
        { q: "ã€åœ‹æ–‡ã€‘ä¸‹åˆ—ã€Œ ã€ä¸­å­—éŸ³å®Œå…¨ç›¸åŒçš„æ˜¯ï¼Ÿ", options: ["ã€Œåª²ã€ç¾/è„¾ã€Œæ°£ã€", "ã€Œç· ã€é€ /ã€Œè«¦ã€è½", "ã€Œè£¨ã€ç›Š/ã€Œç¨—ã€å®˜", "ã€ŒçŒã€ç„¶/ã€Œèƒã€å–"], ans: 3 },
        { q: "ã€åœ‹æ–‡ã€‘ã€Œä¸å‘ä¸äº¢ã€çš„ã€Œäº¢ã€å­—æ„æŒ‡ï¼Ÿ", options: ["æ€¥èº", "ç–²ç´¯", "é«˜å‚²", "å¼·å¤§"], ans: 2 },
        { q: "ã€è‹±æ–‡ã€‘The manager decided to ____ the meeting.", options: ["postpone", "cancel", "preserve", "promote"], ans: 0 },
        { q: "ã€è‹±æ–‡ã€‘Hardly ____ down to sleep when the phone rang.", options: ["he had lain", "had he lain", "has he lied", "did he lie"], ans: 1 }
    ];

    let currentQ = 0;
    let score = 0;
    let timer;
    let timeLeft = 15;
    let playerName = "";

    function startGame() {
        playerName = document.getElementById('player-name').value || "ç„¡åæ¢å“¡";
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        questions.sort(() => Math.random() - 0.5); // éš¨æ©Ÿé¡Œç›®
        showQuestion();
    }

    function showQuestion() {
        if (currentQ >= 5) return endGame();

        timeLeft = 15;
        document.getElementById('time-left').innerText = timeLeft;
        clearInterval(timer);
        timer = setInterval(countDown, 1000);

        const qData = questions[currentQ];
        document.getElementById('question-area').innerText = qData.q;
        const optionsDiv = document.getElementById('options-area');
        optionsDiv.innerHTML = "";

        qData.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = "btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index);
            optionsDiv.appendChild(btn);
        });
    }

    function countDown() {
        timeLeft--;
        document.getElementById('time-left').innerText = timeLeft;
        if (timeLeft <= 0) checkAnswer(-1);
    }

    function checkAnswer(index) {
        clearInterval(timer);
        if (index === questions[currentQ].ans) {
            score += (100 + timeLeft * 10); // ç­”å°åŠ åˆ†ï¼Œå‰©é¤˜ç§’æ•¸è¶Šå¤šåˆ†æ•¸è¶Šé«˜
        }
        currentQ++;
        showQuestion();
    }

    function endGame() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('final-score').innerText = `æœ€çµ‚ç©åˆ†ï¼š${score}`;

        // å„²å­˜æ’è¡Œæ¦œ (ä½¿ç”¨ localStorage)
        let ranks = JSON.parse(localStorage.getItem('agentRanks') || "[]");
        ranks.push({ name: playerName, score: score });
        ranks.sort((a, b) => b.score - a.score);
        ranks = ranks.slice(0, 5); // åªå–å‰äº”å
        localStorage.setItem('agentRanks', JSON.stringify(ranks));

        const list = document.getElementById('leaderboard');
        list.innerHTML = ranks.map(r => `<li>${r.name}: ${r.score} åˆ†</li>`).join('');
    }
</script>

</body>
</html>
